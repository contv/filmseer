[
   {
      "database":"filmseer",
      "index":"movie",
      "setting":{
         "analysis":{
            "analyzer":{
               "ngram_analyzer":{
                  "filter":[
                     "lowercase"
                  ],
                  "type":"custom",
                  "tokenizer":"ngram_tokenizer"
               }
            },
            "tokenizer":{
               "ngram_tokenizer":{
                  "token_chars":[
                     "letter",
                     "digit",
                     "symbol"
                  ],
                  "min_gram":"3",
                  "type":"nGram",
                  "max_gram":"3"
               }
            }
         }
      },
      "nodes":[
         {
            "table":"movies",
            "schema":"public",
            "columns":[
               "movie_id",
               "title",
               "description",
               "release_date",
               "image"
            ],
            "transform":{
               "mapping":{
                  "release_date":{
                     "type":"date"
                  },
                  "movie_id":{
                     "type":"keyword"
                  },
                  "image":{
                     "type":"keyword",
                     "index":"no"
                  },
                  "title":{
                     "type":"text",
                     "fields":{
                        "title_sort":{
                           "type":"keyword"
                        }
                     }
                  }
               }
            },
            "children":[
               {
                  "table":"genres",
                  "schema":"public",
                  "columns":[
                     "name"
                  ],
                  "transform":{
                     "mapping":{
                        "name":{
                           "type":"text",
                           "fields": {
                              "keyword": {
                                 "type": "keyword"
                              }
                           }
                        }
                     }
                  },
                  "relationship":{
                     "variant":"object",
                     "type":"one_to_many",
                     "through_tables":[
                        "movie_genres"
                     ]
                  }
               },
               {
                  "table":"positions",
                  "schema":"public",
                  "columns":[
                     "char_name",
                     "position"
                  ],
                  "transform":{
                     "mapping":{
                        "position":{
                           "type":"keyword"
                        }
                     }
                  },
                  "relationship":{
                     "variant":"object",
                     "type":"one_to_many"
                  },
                  "children":[
                     {
                        "table":"people",
                        "schema":"public",
                        "columns":[
                           "name",
                           "person_id"
                        ],
                        "relationship":{
                           "variant":"object",
                           "type":"one_to_one"
                        },
                        "transform":{
                           "mapping":{
                              "person_id":{
                                 "type":"keyword"
                              }
                           }
                        }
                     }
                  ]
               },
               {
                  "table":"ratings",
                  "schema":"public",
                  "columns":[
                     "rating",
                     "user_id"
                  ],
                  "transform":{
                     "mapping":{
                        "rating":{
                           "type":"double"
                        },
                        "user_id":{
                           "type":"keyword"
                        }
                     }
                  },
                  "relationship":{
                     "variant":"object",
                     "type":"one_to_many"
                  }
               }
            ]
         }
      ]
   }
]